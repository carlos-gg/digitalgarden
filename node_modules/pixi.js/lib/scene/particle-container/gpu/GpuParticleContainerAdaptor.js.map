{"version":3,"file":"GpuParticleContainerAdaptor.js","sources":["../../../../src/scene/particle-container/gpu/GpuParticleContainerAdaptor.ts"],"sourcesContent":["import type { WebGPURenderer } from '../../../rendering/renderers/gpu/WebGPURenderer';\nimport type { ParticleContainer } from '../shared/ParticleContainer';\nimport type { ParticleContainerAdaptor, ParticleContainerPipe } from '../shared/ParticleContainerPipe';\n\nexport class GpuParticleContainerAdaptor implements ParticleContainerAdaptor\n{\n    public execute(particleContainerPop: ParticleContainerPipe, container: ParticleContainer)\n    {\n        const renderer = particleContainerPop.renderer as WebGPURenderer;\n\n        const shader = container.shader || particleContainerPop.defaultShader;\n\n        shader.groups[0] = renderer.renderPipes.uniformBatch.getUniformBindGroup(particleContainerPop.localUniforms, true);\n\n        shader.groups[1] = renderer.texture.getTextureBindGroup(container.texture);\n\n        const state = particleContainerPop.state;\n\n        const buffer = particleContainerPop.getBuffers(container);\n\n        renderer.encoder.draw({\n            geometry: buffer.geometry,\n            shader: container.shader || particleContainerPop.defaultShader,\n            state,\n            size: container.particleChildren.length * 6,\n        });\n    }\n}\n"],"names":[],"mappings":";;;AAIO,MAAM,2BACb,CAAA;AAAA,EACW,OAAA,CAAQ,sBAA6C,SAC5D,EAAA;AACI,IAAA,MAAM,WAAW,oBAAqB,CAAA,QAAA,CAAA;AAEtC,IAAM,MAAA,MAAA,GAAS,SAAU,CAAA,MAAA,IAAU,oBAAqB,CAAA,aAAA,CAAA;AAExD,IAAO,MAAA,CAAA,MAAA,CAAO,CAAC,CAAI,GAAA,QAAA,CAAS,YAAY,YAAa,CAAA,mBAAA,CAAoB,oBAAqB,CAAA,aAAA,EAAe,IAAI,CAAA,CAAA;AAEjH,IAAA,MAAA,CAAO,OAAO,CAAC,CAAA,GAAI,SAAS,OAAQ,CAAA,mBAAA,CAAoB,UAAU,OAAO,CAAA,CAAA;AAEzE,IAAA,MAAM,QAAQ,oBAAqB,CAAA,KAAA,CAAA;AAEnC,IAAM,MAAA,MAAA,GAAS,oBAAqB,CAAA,UAAA,CAAW,SAAS,CAAA,CAAA;AAExD,IAAA,QAAA,CAAS,QAAQ,IAAK,CAAA;AAAA,MAClB,UAAU,MAAO,CAAA,QAAA;AAAA,MACjB,MAAA,EAAQ,SAAU,CAAA,MAAA,IAAU,oBAAqB,CAAA,aAAA;AAAA,MACjD,KAAA;AAAA,MACA,IAAA,EAAM,SAAU,CAAA,gBAAA,CAAiB,MAAS,GAAA,CAAA;AAAA,KAC7C,CAAA,CAAA;AAAA,GACL;AACJ;;;;"}